<div class="page-wrap">
  <div class="bredcrumb-title-wrap">
    <app-breadcrumb [breadCrumbData]="breadCrumbData"></app-breadcrumb>
    <div class="title flex-container">
      <h1><span class="left-arrow"><img class="left-img" src="assets/images/svg-icons/leftarrow_black.svg"
            alt="leftArrow" [routerLink]="['/search-feedbacksurvey']"></span>View FeedbackSurvey</h1>
      <div class="slider">
        {{surveyData?.status}} <mat-slide-toggle disabled [checked]="checked" class="mat-slide-toggle">
        </mat-slide-toggle>
      </div>
    </div>
  </div>
  <div class="form-wrap">
    <div class="row">

      <div class="col-3">
        <mat-card class="store-card label-card">
          <div class="row">
            <div class="col-md-12">
              <div class="view-label">
                <label>Servey Name</label>
                <p>{{surveyData?.surveyName}}</p>
              </div>
            </div>
            <div class="col-md-12">
              <div class="view-label">
                <label>Country</label>
                <div class="label-align">
                  <p *ngFor="let country of countries">{{country?.countryName}}</p>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="view-label">
                <label>City</label>
                <div class="label-align">
                  <p *ngFor="let city of cities">{{city?.cityName}}</p>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="view-label">
                <label>Brand</label>
                <div class="label-align">
                  <p *ngFor="let brand of brands">{{brand?.brandName}}</p>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="view-label">
                <label>Mall</label>
                <div class="label-align">
                  <p *ngFor="let mall of malls">{{mall?.mallName}}</p>
                </div>
              </div>
            </div>
            <!-- <div class="col-md-12 pl-5px">
                <div class="slider">
                    {{surveyData?.otherChannels}} <mat-slide-toggle disabled [checked]="otherChannels" class="mat-slide-toggle">
                    </mat-slide-toggle>
                  </div>
              <div class="row">
                <mat-checkbox class="checkbox1">Email</mat-checkbox>
                <mat-checkbox class="checkbox">SMS</mat-checkbox>
                <mat-checkbox class="checkbox">Push</mat-checkbox>
              </div>
            </div> -->
            <div class="col-md-12">
              <div class="toggle-block">
                <div class="toggle-panel">
                  <p *ngIf="otherChannels">
                    Other Channels
                  </p>
                  <p>
                    <span>
                      <mat-slide-toggle class="example-margin" [checked]="!otherChannels" disabled></mat-slide-toggle>
                    </span>
                  </p>
                  <p *ngIf="!otherChannels">
                    Kiosk
                  </p>
                </div>
              </div>
              <div class="row" *ngIf="otherChannels">
                <mat-checkbox class="checkbox1" [checked]="otherChannelEMAIL" disabled>Email</mat-checkbox>
                <mat-checkbox class="checkbox" [checked]="otherSMS" disabled>SMS</mat-checkbox>
                <mat-checkbox class="checkbox" [checked]="otherPUSH" disabled>Push</mat-checkbox>
              </div>
            </div>
          </div>
        </mat-card>
      </div>
      <div class="col-4 second-card">
        <mat-card class="mb-10px">
          <div class="row">
            <div class="col-md-6">
              <div class="view-label">
                <label>Header</label>
                <div class="row ckbox" *ngIf="otherChannels">
                  <mat-checkbox class="checkbox1" [checked]="headerEmail" disabled>Email</mat-checkbox>
                  <mat-checkbox class="checkbox" [checked]="headerSMS" disabled>SMS</mat-checkbox>
                  <mat-checkbox class="checkbox" [checked]="headerPUSH" disabled>Push</mat-checkbox>
                </div>
              </div>
              <div class="view-label">
                <label>Background Color</label>
                <p>{{surveyData?.headerBackgroundColor}}</p>
              </div>
            </div>
            <div class="col-md-6">
              <div class="grid img-block">
                <div class="avatar-zone" *ngIf='surveyData?.headerImage!=""'>
                  <img class="upload-img" [src]="imgUrl+surveyData?.headerImage" [class.uploaded-img]="imgUpload">
                </div>
                <div class="noImage" *ngIf='surveyData?.headerImage==""'>
                  <p>No Image</p>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="view-label">
                <div>
                  <label>Text</label>
                  <p>{{surveyData?.headerText}} </p>
                </div>
              </div>
            </div>
          </div>
        </mat-card>
        <mat-card class="mb-10px">
          <div class="row">
            <div class="col-md-6">
              <label>Body</label>
              <div class="view-label">
                <label>Background Color</label>
                <p>{{surveyData?.bodyBackgroundColor}}</p>
              </div>
            </div>
            <div class="col-md-6">
              <div class="grid img-block">
                <div class="avatar-zone" *ngIf='surveyData?.bodyBackgroundImage!=""'>
                  <img class="upload-img" [src]="imgUrl+surveyData?.bodyBackgroundImage"
                    [class.uploaded-img]="imgUpload">
                </div>
                <div class="noImage" *ngIf='surveyData?.bodyBackgroundImage==""'>
                  <p>No Image</p>
                </div>
              </div>
            </div>
          </div>
        </mat-card>
        <mat-card class="mb-10px">
          <div class="row">
            <div class="col-md-6">
              <div>
                <label>Footer</label>
                <div class="row ckbox" *ngIf="otherChannels">
                  <mat-checkbox class="checkbox1" [checked]="footerEmail" disabled>Email</mat-checkbox>
                  <mat-checkbox class="checkbox" [checked]="footerSMS" disabled>SMS</mat-checkbox>
                  <mat-checkbox class="checkbox" [checked]="footerPUSH" disabled>Push</mat-checkbox>
                </div>
              </div>
              <div class="view-label">
                <label>Background Color</label>
                <p>{{surveyData?.footerBackgroundColor}} </p>
              </div>
            </div>
            <div class="col-md-6">
              <div class="grid img-block">
                <div class="avatar-zone" *ngIf='surveyData?.footerImage!=""'>
                  <img class="upload-img" [src]="imgUrl+surveyData?.footerImage" [class.uploaded-img]="imgUpload">
                </div>
                <div class="noImage" *ngIf='surveyData?.footerImage==""'>
                  <p>No Image</p>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="view-label">
                <label>Text</label>
                <p>{{surveyData?.footerText}} </p>
              </div>
            </div>
          </div>
        </mat-card>
      </div>
      <div class="col-5">
        <mat-card class="store-card">
          <h3 class="card-title text-dark">Feedback Flow</h3>
          <div class="row">

            <div class="col-md-12 pb-10px">
              <div class="chip-list d-flex flex-wrap ">
                <table class="table" *ngIf="assignedFlow.length>0">
                  <tr>
                    <th>Flow Name</th>
                    <th>Start & End Date</th>
                    <th>Start Time</th>
                  </tr>
                  <tr *ngFor="let User of assignedFlow;let valueIndex=index;">
                    <td> {{User.flowName}},</td>
                    <td> {{User.startDate}},{{User.endDate}},</td>
                    <td> {{User.startTime}},{{User.endTime}}</td>
                  </tr>
                </table>
                <div class="pb-3" *ngIf="assignedFlow.length == 0">
                  <mat-chip-list>
                    <mat-chip> no assign flow found</mat-chip>
                  </mat-chip-list>
                </div>
              </div>
            </div>



            <div class="col-md-12">
              <h4 class="card-title text-dark">Notify Users</h4>
            </div>
            <div class="col-md-12">
              <div class="chip-list d-flex flex-wrap ">
                <mat-chip-list *ngFor="let i of notifyUsers">
                  <mat-chip> {{i.userName}}</mat-chip>
                </mat-chip-list>
              </div>
            </div>
          </div>
        </mat-card>
      </div>




      <div class="attach-coupon-bg col-md-12" *ngIf="attachkiosk">
        <div class="attach-coupon-reg">
          <div class="attach-coupon-regtitle">
            <p>
              Kiosk
            </p>
          </div>

        </div>
        <div class="selected-coupon">
          <div class="search-panel-block">
            <div class="add-table-wrap">
              <div class="table-wrap">
                <div class="table-wrap-inner">
                  <div class="rule-coupon">
                    <table mat-table [dataSource]="dataSource"  matSort *ngIf="dataSource">
                      <ng-container matColumnDef="deviceId">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
                        <td mat-cell *matCellDef="let row"> {{row.deviceId}}</td>
                      </ng-container>
                      <ng-container matColumnDef="deviceName">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>NAME</th>
                        <td mat-cell *matCellDef="let row">
                          <u><a [routerLink]="['/view-kiosk/', row.deviceId]"
                              class="text-blue">{{row.deviceName}}</a></u>
                        </td>
                      </ng-container>

                      <ng-container matColumnDef="storeName">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> STORE NAME </th>
                        <td mat-cell *matCellDef="let row"> {{row.storeName}} </td>
                      </ng-container>

                      <ng-container matColumnDef="countryName">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> COUNTRY NAME </th>
                        <td mat-cell *matCellDef="let row"> {{row.countryName}} </td>
                      </ng-container>

                      <ng-container matColumnDef="brandName">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> BRAND NAME </th>
                        <td mat-cell *matCellDef="let row"> {{row.brandName}} </td>
                      </ng-container>

                      <ng-container matColumnDef="deviceStatus">
                        <th mat-header-cell *matHeaderCellDef> CONNECTION </th>
                        <td mat-cell *matCellDef="let row"> {{row.deviceStatus}} </td>
                      </ng-container>
                      <ng-container matColumnDef="lastOnline">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> LAST ONLINE </th>
                        <td mat-cell *matCellDef="let row">{{row.lastOnline | date:'short'}}</td>
                      </ng-container>

                      <ng-container matColumnDef="batteryStatus">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> BATTERY </th>
                        <td mat-cell *matCellDef="let row">

                          <p *ngIf="row.batteryStatus">{{row.batteryStatus }}%</p>
                          <p *ngIf="!row.batteryStatus">0%</p>
                        </td>
                      </ng-container>
                      <ng-container matColumnDef="status">
                        <th mat-header-cell *matHeaderCellDef> STATUS </th>
                        <td mat-cell *matCellDef="let row"> {{row.status}} </td>
                      </ng-container>

                      <ng-container matColumnDef="verificationCode">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> CODE </th>
                            <td mat-cell *matCellDef="let row"> {{row.verificationCode}}</td>
                          </ng-container>

                      <ng-container matColumnDef="preview">
                        <th mat-header-cell *matHeaderCellDef class="top-border"> PREVIEW </th>
                        <td mat-cell *matCellDef="let row">
                          <p class="pointer">
                            <a href="{{flowURL}}/flow/?flowId={{row.assingedFlow}}&kioskId={{row.deviceId}}&ispreview=true&kiosk=true&channelType=EMAIL"
                              target="_blank"> <img src="assets/images/svg-icons/preview_icon.svg" alt="preview_icon"
                                width="20px;"></a>
                          </p>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedColumns;">
                      </tr>
                    </table>
                    <!-- <div *ngIf="searchResults" class="select-store-block">
                          <img src="assets/images/loader-icons/Blue-loading-200px.svg" alt="Loader">
                        </div>
                        <div class="no-records" *ngIf="resultsLength === 0">
                          No Records Found!
                        </div> -->
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="pageLoader" class="page-loader-block full-page-loader">
        <img src="assets/images/loader-icons/Blue-loading-200px.svg" alt="Loader">
      </div>
      <div class="button-wrap text-right pt-20px col-md-12">
        <!-- <button class='button secondary-btn' type="button" [routerLink]="['/search-feedbacksurvey']">CANCEL</button> -->
        <button class='button primary-btn ' type="button" (click)="sendForApproval('SENDFORAPPROVAL')" [class.displaynone]="displayNone"
          *ngIf="approvalBtnStatus == 'NEW' || approvalBtnStatus == 'UPDATED'">SEND FOR APPROVAL</button>
        <button class='button primary-btn ' type="button" (click)="sendForApproval('APPROVAL')" [class.displaynone]="displayNone"
          *ngIf="IssendForApproval && (approvalBtnStatus == 'WAITINGAPPROVAL')">APPROVE</button>
        <button class='button primary-btn ' type="submit"
          [routerLink]="['/edit-feedback-survey/'+surveyId]">EDIT</button>
      </div>
    </div>
  </div>
</div>
