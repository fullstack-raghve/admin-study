<div class="page-wrap">
    <div class="bredcrumb-title-wrap">
        <div class="common-search">
            <div class="store-title">
                <div class="">
                     <h6>Select Rule</h6>
                </div>
             <div class="">
                 <!-- <mat-form-field>
                   <mat-select placeholder="Select Program" (selectionChange)="onItemChange($event.value)">
                     <mat-option *ngFor="let program of programs" [value]="program.programId" >{{program.programName}}</mat-option>
                   </mat-select>
                 </mat-form-field> -->
                 <mat-form-field class="example-full-width">
                  <input matInput placeholder="Select Segment" aria-label="Program" [matAutocomplete]="programAutoComplete"
                    [formControl]="programCtrl">
                  <mat-autocomplete #programAutoComplete="matAutocomplete">
                    <mat-option *ngFor="let program of filteredprograms | async" [value]="program.programName"
                      (click)="onItemChange(program.programId)" #programInput>
                      <span>{{program.programName}}</span>
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>
             </div>
            </div>
            <div class="close-icon text-right">
                <img src="assets/images/icons/filter_close_ico.png" (click)="onCloseClick()" alt="">
            </div>
        </div>
    </div>
    <div class="form-wrap">
        <mat-tab-group>
          <mat-tab label="Earn Rule">
              <div class="table-wrap">
                <div class="table-wrap-inner" malihu-scrollbar [scrollbarOptions]="scrollbarOptions">
                  <table mat-table [dataSource]="dataSource" matSort>
                    <ng-container matColumnDef="select">
                      <th mat-header-cell *matHeaderCellDef>

                      </th>
                      <td mat-cell *matCellDef="let row">
                          <mat-radio-button (click)="$event.stopPropagation()"
                          (change)="$event ? selection.toggle(row) : null"
                          [checked]='isEarnRuleSelected(row)'></mat-radio-button>
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="ruleId">
                      <th mat-header-cell *matHeaderCellDef>RULE ID</th>
                      <td mat-cell *matCellDef="let row">{{ row.earnRuleId }}</td>
                    </ng-container>

                    <ng-container matColumnDef="ruleName">
                      <th mat-header-cell *matHeaderCellDef>RULE NAME</th>
                      <td mat-cell *matCellDef="let row">{{ row.ruleName }}</td>
                    </ng-container>

                    <ng-container matColumnDef="actionType">
                      <th mat-header-cell *matHeaderCellDef>ACTION TYPE</th>
                      <td mat-cell *matCellDef="let row">{{ row.actionType }}</td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                      <th mat-header-cell *matHeaderCellDef>ACTION</th>
                      <td mat-cell *matCellDef="let row">{{ row.action }}</td>
                    </ng-container>

                    <ng-container matColumnDef="rewardType">
                        <th mat-header-cell *matHeaderCellDef>REWARD TYPE</th>
                        <td mat-cell *matCellDef="let row">{{ row.rewardType }}</td>
                      </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                  </table>
                  <div class="no-records" *ngIf="resultsLength === 0">
                    No Records Found!
                  </div>
                </div>
                <mat-paginator [pageSizeOptions]="[10,20,50,100]" showFirstLastButtons></mat-paginator>
              </div>

               </mat-tab>
              <mat-tab label="Burn Rule">
                  <div class="table-wrap">
                    <div class="table-wrap-inner">
                      <table mat-table [dataSource]="dataSource1" matSort>
                        <ng-container matColumnDef="select">
                          <th mat-header-cell *matHeaderCellDef>
                          </th>
                          <td mat-cell *matCellDef="let row">
                              <mat-radio-button (click)="$event.stopPropagation()"
                              (change)="$event ? selection.toggle(row) : null"
                              [checked]='isBurnRuleSelected(row)'></mat-radio-button>
                          </td>
                        </ng-container>
                        <ng-container matColumnDef="ruleId">
                          <th mat-header-cell *matHeaderCellDef>RULE ID</th>
                          <td mat-cell *matCellDef="let row">{{ row.burnRuleId }}</td>
                        </ng-container>

                        <ng-container matColumnDef="ruleName">
                          <th mat-header-cell *matHeaderCellDef>RULE NAME</th>
                          <td mat-cell *matCellDef="let row">{{ row.ruleName }}</td>
                        </ng-container>

                        <ng-container matColumnDef="rewardType">
                          <th mat-header-cell *matHeaderCellDef>REWARD TYPE</th>
                          <td mat-cell *matCellDef="let row">{{ row.rewardType }}</td>
                        </ng-container>

                        <ng-container matColumnDef="redeemType">
                          <th mat-header-cell *matHeaderCellDef>REDEEM TYPE</th>
                          <td mat-cell *matCellDef="let row">{{ row.redeemType }}</td>
                        </ng-container>

                        <ng-container matColumnDef="redeemQty">
                          <th mat-header-cell *matHeaderCellDef>REDEEM QTY</th>
                          <td mat-cell *matCellDef="let row">{{ row.redeemQty }}</td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumnsBurn; sticky: true"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsBurn"></tr>
                      </table>
                      <div class="no-records" *ngIf="resultsLength1 === 0">
                        No Records Found!
                      </div>
                    </div>
                        <mat-paginator [pageSizeOptions]="[10,20,50,100]" showFirstLastButtons></mat-paginator>
                  </div>
              </mat-tab>
            </mat-tab-group>
            <div class="button-wrap">
                <div class="">
                  <button class="button secondary-btn" [mat-dialog-close]="{
                    'buttonName': 'CANCEL'
                  }">CANCEL</button>
                  <button class="button primary-btn" [mat-dialog-close]="{
                    'buttonName': 'SELECT',
                    'tableData': selection.selected
                  }">SELECT</button>
                </div>
              </div>
    </div>
  </div>
